Metadata-Version: 2.4
Name: Trace
Version: 0.1.0
Summary: An AI powered journaling companion
Requires-Python: >=3.12
Description-Content-Type: text/markdown
Requires-Dist: langchain>=0.1.0
Requires-Dist: langchain-core>=0.1.0
Requires-Dist: langchain-google-genai>=2.0.0
Requires-Dist: langgraph>=0.2.0
Requires-Dist: langsmith>=0.1.0
Requires-Dist: python-dotenv>=1.0.0
Requires-Dist: fastapi>=0.100.0
Requires-Dist: uvicorn[standard]>=0.24.0
Requires-Dist: pydantic>=2.0.0
Requires-Dist: httpx>=0.24.0
Provides-Extra: dev
Requires-Dist: pytest>=7.0.0; extra == "dev"
Requires-Dist: pytest-asyncio>=0.21.0; extra == "dev"

# Trace - AI Journaling Companion

A full-stack journaling companion built with LangChain, FastAPI, and React.

## Project Structure

```
Trace/
â”œâ”€â”€ agent.py                      # FastAPI backend + CLI agent
â”œâ”€â”€ prompts/
â”‚   â””â”€â”€ main_agent_sys_prompt.py  # System prompt for the agent
â”œâ”€â”€ screens/
â”‚   â”œâ”€â”€ LoginScreen.jsx           # Login/Register screen
â”‚   â””â”€â”€ ChatScreen.jsx            # Main chat interface
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ChatHeader.jsx            # Chat header with logout
â”‚   â”œâ”€â”€ MessageBubble.jsx         # Individual message component
â”‚   â”œâ”€â”€ MessageInput.jsx          # Message input form
â”‚   â”œâ”€â”€ MessageList.jsx           # Message list container
â”‚   â””â”€â”€ TraceLogo.jsx             # Logo component
â”œâ”€â”€ public/
â”‚   â””â”€â”€ index.html                # HTML entry point
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.jsx                 # React app entry point
â”‚   â””â”€â”€ index.css                 # Global styles
â”œâ”€â”€ App.jsx                       # Main React component
â”œâ”€â”€ package.json                  # NPM dependencies
â”œâ”€â”€ pyproject.toml                # Python dependencies
â”œâ”€â”€ .env.example                  # Environment variables template
â””â”€â”€ README.md
```

## Setup & Installation

### Prerequisites
- Node.js 16+ 
- Python 3.12+
- Gemini API key (get from [Google AI Studio](https://makersuite.google.com/app/apikey))

### Backend Setup

1. **Install Python dependencies:**
   ```bash
   uv sync
   ```

2. **Set up environment variables:**
   Create a `.env` file in the root directory:
   ```
   GEMINI_API_KEY=your_gemini_api_key_here
   ```

3. **Run as FastAPI backend (default):**
   ```bash
   python agent.py
   ```
   
   The backend will start on `http://localhost:3001`

4. **Or run in CLI mode:**
   ```bash
   python agent.py --cli
   ```
   
   This provides an interactive command-line journaling experience

### Frontend Setup

1. **Install Node dependencies:**
   ```bash
   npm install
   ```

2. **Start the React development server:**
   ```bash
   npm start
   ```
   
   The frontend will open at `http://localhost:3000`

## Quick Start

### Running Both Backend and Frontend

**Terminal 1 - Start Backend:**
```bash
python agent.py
```

**Terminal 2 - Start Frontend:**
```bash
npm start
```

Then open `http://localhost:3000` in your browser.

### Alternative: CLI Mode Only
```bash
python agent.py --cli
```

## Features

- ğŸ’¬ **Conversational Interface**: Both web and CLI interfaces
- ğŸ¤– **AI-Powered Reflection**: Uses Gemini 2.5-flash with custom journaling prompts
- ğŸ“ **Message History**: Maintains conversation context across turns
- âš¡ **Rate Limiting**: Built-in handling for API rate limits
- ğŸ¨ **Beautiful UI**: Modern, gradient-based chat interface with custom theme
- ğŸ“± **Responsive Design**: Works on desktop and mobile
- ğŸ” **CORS Enabled**: Secure cross-origin requests
- ğŸ’¾ **Session Management**: Unique session IDs for multiple users

## API Endpoints

### POST `/chat`
Send a message to the agent.

**Request:**
```json
{
  "message": "I had a tough day today",
  "session_id": "default"
}
```

**Response:**
```json
{
  "response": "I'm sorry to hear it was tough. What happened that made it difficult?",
  "session_id": "default"
}
```

### GET `/health`
Health check endpoint.

**Response:**
```json
{
  "status": "ok"
}
```

## Technologies Used

- **Backend**: FastAPI, LangChain, LangGraph, Gemini 2.5-flash API
- **Frontend**: React 18, Material-UI (MUI), Lucide React icons
- **State Management**: React hooks, LangGraph's StateGraph
- **Message Handling**: LangChain message types and add_messages reducer
- **Styling**: MUI Theme Provider with custom color palette

## Environment Variables

See `.env.example` for all available options:

```
# Required
GEMINI_API_KEY=your_gemini_api_key_here

# Optional (Frontend)
REACT_APP_BACKEND_URL=http://localhost:3001
```

## Development

### Backend Development
- Edit `agent.py` for API changes or backend logic
- Edit `prompts/main_agent_sys_prompt.py` for agent behavior modifications
- Use `python agent.py --cli` to test CLI functionality

### Frontend Development
- Edit component files in `components/` and `screens/` folders
- Edit `App.jsx` for main app structure
- Edit `src/index.css` for global styling
- MUI theme can be customized in `App.jsx`

## Troubleshooting

### Backend Connection Issues
- Make sure backend is running: `python agent.py`
- Check that backend is on port 3001
- If port is busy, modify `agent.py` line with `uvicorn.run()` to use a different port
- Update `REACT_APP_BACKEND_URL` in frontend `.env` if using a different port

### Port Already in Use

**Backend (Port 3001):**
```python
# In agent.py, change the last line to:
uvicorn.run(app, host="0.0.0.0", port=3002)
```

Then update frontend `.env`:
```
REACT_APP_BACKEND_URL=http://localhost:3002
```

**Frontend (Port 3000):**
```bash
PORT=3002 npm start
```

### Missing Dependencies
- Backend: `uv sync` to install all Python dependencies
- Frontend: `npm install` to install all Node dependencies

### CORS Errors
- Backend should have CORS middleware enabled by default
- Ensure `REACT_APP_BACKEND_URL` matches the actual backend URL
- Check browser console for specific CORS error messages

### Rate Limiting (429 Errors)
- The app includes automatic rate limiting in the backend
- If you hit Gemini API rate limits, wait a few seconds and try again
- Check your Gemini API quota and plan

### API Key Issues
- Ensure `.env` file is in the project root (same directory as `agent.py`)
- Verify `GEMINI_API_KEY` is correctly set in `.env`
- Restart backend after changing `.env`

## License

MIT

